# Enhanced Logging System for Smart Tourist Safety System

This logging system provides clean, focused, and informative logs for the Smart Tourist Safety & Incident Response System API.

## Features

- **Clean Request/Response Logging**: Concise, easy-to-read logs for all API requests
- **Color-Coded Console Output**: Makes log levels immediately identifiable
- **Request ID Tracking**: Each request gets a unique ID for tracing across log entries
- **Performance Metrics**: Response time tracking for performance analysis
- **Smart Filtering**: Excludes noisy endpoints like health checks, but always logs critical paths
- **Detailed Error Logging**: Comprehensive error information with traceability

## Log Formats

### Console Output (Clean)

```
HH:MM:SS | LEVEL   | Component            | Message
```

Example:
```
18:12:45 | INFO    | access               | → 3f7a12b4 | POST /registerTourist | Client: 127.0.0.1
18:12:45 | INFO    | access               | ← 3f7a12b4 | 201 | POST /registerTourist | 237ms
```

### File Output (Detailed)

```
YYYY-MM-DD HH:MM:SS | LEVEL   | Component            | Message
```

## Viewing Logs

### Simple Log Viewer

We've included a simple log viewer to help you read logs without clutter:

```
python simple_logs.py
```

#### Options:
- `-n, --lines`: Number of lines to show (default: 20)
- `-f, --file`: Log file to view (default: logs/api.log)

Example:
```
python simple_logs.py -n 50
```

## Log Files

- `logs/api.log`: Main API log file with all system events
- `logs/data_changes.log`: Detailed log of data modifications

## Troubleshooting Common Issues

### Missing Log Files

If log files are missing, make sure the `logs` directory exists:

```python
os.makedirs("logs", exist_ok=True)
```

### Log Level Too Verbose/Quiet

Adjust log levels in `app/clean_logging.py`:

```python
# For less verbose logs:
root_logger.setLevel(logging.WARNING)  # Only warnings and above

# For more verbose logs:
root_logger.setLevel(logging.DEBUG)  # All logs including debug
```

## Customizing Logging

To modify which paths are logged or excluded, edit the `exclude_paths` and `always_log_paths` sets in the `CleanRequestLoggingMiddleware` class in `app/clean_logging.py`.